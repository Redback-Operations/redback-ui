# Contributing to Redback UI

1. [Prerequisites](#prerequisites)
2. [Getting started](#getting-started)
3. [Creating a new component](#creating-a-new-component)
4. [Working with documentation pages](#working-with-documentation-pages)
5. [Before submitting your change](#before-submitting-your-change)
6. [Submitting your change](#submitting-your-change)
7. [Video tutorials](#video-tutorials)
8. [Useful links](#useful-links)

---

## Prerequisites
- [Git](https://git-scm.com/downloads) installed
- [Node.js](https://nodejs.org/en/download/current) installed
- IDE or editor of choice (e.g., WebStorm, VS Code)
- Terminal of choice (e.g., Git Bash, WSL, PowerShell, Command Prompt, MacOS Terminal)
- Web browser

### Recommended
- React Dev Tools browser extension for [Chrome](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi), [Firefox](https://addons.mozilla.org/en-US/firefox/addon/react-devtools/), or [Edge](https://microsoftedge.microsoft.com/addons/detail/react-developer-tools/gpphkfbcpidddadnkolkpfckpihlkkil)

### Optional
- Git GUI such as GitKraken, SourceTree, GitHub Desktop (if you prefer this over working only with terminal commands)

## Getting started

1. If you do not have write access to the repository, first fork the repository to your own GitHub account by clicking on the "Fork" button in the top right corner of the repository page on GitHub.

   If you have write access, you can skip this step and create a branch within the main repository directly.

2. Clone the repository to your local machine

	For your fork:
    ```bash
    git clone https://github.com/YOUR_USERNAME_HERE/redback-ui.git
    ```
    For the main repository:
	```bash
        git clone https://github.com/Redback-Operations/redback-ui.git
    ```
3. Create a branch for your work, following the Capstone [Branching Guidelines](https://verdant-raindrop-f3e404.netlify.app/processes/quality-assurance/git-contributions-guide/#branching-guidelines)
    ```bash
    git branch <branch-name>
    ```
4. Check out your branch
    ```bash
    git checkout <branch-name>
    ```
5. Open your terminal and navigate to the project directory
    ```bash
    cd path/to/redback-ui
    ```
6. Install the project dependencies
    ```bash
   npm install
    ```
7. Start Storybook and see the components and docs, including your changes, in your browser
    ```bash
    npm run storybook
    ```
## Creating a new component

[generate-react-cli](https://www.npmjs.com/package/generate-react-cli) is set up to generate the boilerplate code required for a new component using our pre-defined templates. To create a new component, run the following command in your terminal, replacing `ComponentName` with the name of your component.

```bash
npx generate-react-cli component ComponentName
```

A new folder named with your component name will be created in the `src/components` directory, containing the following files:
- `ComponentName.tsx`: the main React component file
- `ComponentName.styled.ts`: where styles are defined, using [styled-components](https://styled-components.com/)
- `ComponentName.stories.tsx`: the [Storybook](https://storybook.js.org/) file used to see, test, and document the component
- `ComponentName.test.tsx`: the unit test file. A basic example is included. Please add further tests as relevant to your component.

**Important!** To enable your component to be used by other apps or websites using the short `import { YourComponent } from '@redbackops/redback-ui'` syntax, you will need to export it from `src/index.ts`. Please add it to the list following the same format as the other components, and in alphabetical order.

### Theme and design tokens
Design tokens are used to maintain consistency across the design system and applications that use it. The tokens are defined in a JavaScript object.

All apps/websites consuming Redback UI should define a theme with keys matching the example provided in Redback UI (i.e., of type `RedbackUiTheme`), and be wrapped in a `RedbackUiThemeProvider` component imported from Redback UI. This component is a wrapper for styled-components' `ThemeProvider` that expects the tokens we have defined.

When developing components for Redback UI, please use design tokens wherever possible rather than hard-coding values. This will ensure consistency and make it easier to apply new themes or update the design system in the future.

### Automated tests
This project is set up for unit testing with [Jest](https://jestjs.io/) and [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/).  Further testing types will be added as the project progresses.

To run the unit tests from your terminal, run the following command:

```bash
npm run test:unit
```

Instructions on running tests using WebStorm's relevant IDE features will be made available as the project progresses.

## Working with documentation pages

Component documentation pages are automatically generated by the `.stories.tsx` files in the `src/components` directory.

In addition to these, custom documentation pages written in Markdown are located in the `docs` directory. `.mdx` files can contain React components, making it possible to use custom components to lay out and style documentation page content in more complex ways than basic Markdown supports, when appropriate.

Like regular components, [generate-react-cli](https://www.npmjs.com/package/generate-react-cli) is set up to simplify the creation of new custom components for documentation pages. If you see a need to add a new component for documentation purposes, please use the generator to do so from the boilerplate templates:

```bash
npx generate-react-cli component ComponentName --type=doc
```

## Before submitting your change

1. Test the built version of Storybook to make sure everything works as expected, so that when your PR is approved and merged into the main branch you can be confident that you haven't introduced any errors such as incorrect file paths.

	- Build Storybook
		```bash
		npm run build
		```
	- Preview the built version locally
		```bash
		npm run preview
		```

2. Run ESLint to check for any formatting or quality issues in your code according to the project's ESLint configuration.

	```bash
	npm run lint
	```

	Some issues can be fixed automatically:
	```bash
	npm run lint:fix
	```

	It is recommended to enable running ESLint on save in your IDE to catch issues and reformat code as you work.

	If you would like to add or edit a rule in the ESLint configuration, please raise a pull request with your change and include the reasoning in the description.


3. Ensure your files follow the expected structure

	```bash
	npm run lint:structure
	```

	_**Note**: This will also run the general ESLint checks from step 2, so it's a good idea to run that first so you can fix any issues before running the structure check._

4. If you created a new component, ensure it is exported by opening `src/index.ts` and add your component to the list following the same format as the other components, and in alphabetical order.

5. Bump the version number in `package.json` according to the [Semantic Versioning](https://semver.org/) guidelines.

## Submitting your change

1. Stage your changes
	```bash
	git add .
	```
2. Commit your changes to your local branch
	```bash
	git commit -m "A brief description of your changes"
	```
3. Push your changes up to GitHub

	For the first time:
	```bash
	git push --set-upstream origin <branch-name>
	```
	For subsequent pushes:
	```bash
	git push
	```
4. Create a pull request on GitHub, in [the main Redback UI repository](https://github.com/Redback-Operations/redback-ui), ensuring your include a clear description of your changes and any relevant context for reviewers.

## Video tutorials
1. [Local setup](https://www.loom.com/share/d77050ce968e4c3690f1760988318de3?sid=d2426caa-3dbf-4477-97a3-0e6beb4391d9) (5 minutes)
2. [Storybook 101](https://www.loom.com/share/527a2b3bec2d430b805dd35e273e9f27?sid=31f6d006-271c-40ff-8412-a792aa61e03e) (9 minutes)
3. [Creating a new component + Styled Components 101](https://www.loom.com/share/79151a01446d4a798267b72dc01b6fa2) (15 minutes)
4. Accessibility 101 + Styled Components 102 (coming soon)

## Useful links
- [React docs](https://react.dev/)
- [Styled Components docs](https://styled-components.com/)
- [Storybook docs](https://storybook.js.org/docs/get-started/whats-a-story)
- [TypeScript docs](https://www.typescriptlang.org/docs/)
- Web Content Accessibility Guidelines (WCAG), in particular:
  - [1.4: Distinguishable](https://www.w3.org/WAI/WCAG21/quickref/#distinguishable)
  - [2.x: Operable](https://www.w3.org/WAI/WCAG22/quickref/?versions=2.1#principle2)
